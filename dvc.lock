schema: '2.0'
stages:
  00-pci-seurat-import:
    cmd: Rscript pci_seurat_import.R
    deps:
    - path: ../analysis/seurat/20200816/pci_filtered_seurat_object.rdat
      md5: b74d3c5988fa4abe53b75c2c85eecab3
      size: 15820543894
    - path: pci_seurat_import.R
      md5: 53f2706e327ff8cb3e989b4c4dcfee70
      size: 2292
    outs:
    - path: ../analysis/pci_import/
      md5: d80b15122555f43bd7a7bf679eefe514.dir
      size: 39924748994
      nfiles: 2
  01-liger-subcluster-import:
    cmd: Rscript liger_seurat_import.R
    deps:
    - path: ../analysis/liger_subcluster/20200824
      md5: eda45284d0c198128ac022b5b3a49b18.dir
      size: 19270234545
      nfiles: 75
    - path: liger_seurat_import.R
      md5: 0b0018a18bffa72ec382f2a0acbc8ae6
      size: 766
    outs:
    - path: ../analysis/seurat_lchen/liger_subcluster_meta.csv
      md5: 6d35b6c061a8b0946e535f04b84b3565
      size: 418643117
    - path: ../analysis/seurat_lchen/liger_subcluster_metadata.rds
      md5: 55bbad22b0f222adf26a590832db96b5
      size: 457429898
  01-liger-seurat-import:
    cmd: Rscript liger_seurat_import.R
    deps:
    - path: ../analysis/liger_subcluster/20200824
      md5: eda45284d0c198128ac022b5b3a49b18.dir
      size: 19270234545
      nfiles: 75
    - path: liger_seurat_import.R
      md5: 38c4a7d066b6b5015182d1ec1bde8baf
      size: 1056
    outs:
    - path: ../analysis/seurat_lchen/liger_subcluster_metadata.csv
      md5: 9818060cbf3cd8793fb82cb838aec119
      size: 431127437
    - path: ../analysis/seurat_lchen/liger_subcluster_metadata.rds
      md5: 58eaf2a056c53dfd755e1ecbdf47e656
      size: 459799244
  02-seurat-excitatory-layers:
    cmd: Rscript seurat_excitatory_layers.R
    deps:
    - path: ../analysis/pci_import/pci_seurat.rds
      md5: ab792d590aea4bd458943607589bfdd6
      size: 39581782428
    - path: ../resources/excitatory_layers_20210318.csv
      md5: 984763aaa06969cdee1aaae79508d285
      size: 702
    - path: seurat_excitatory_layers.R
      md5: 825c2f20c8aed8a871de1b9d163a0c76
      size: 4057
    outs:
    - path: ../analysis/seurat_lchen/seurat_excitatory_layers/ct_layer.csv
      md5: b5285deb180c36019782cb4479f74ecf
      size: 7684
    - path: ../analysis/seurat_lchen/seurat_excitatory_layers/excitatory_markers.pdf
      md5: 66ba2e6eca1207bdb90c1734b153f405
      size: 274883
    - path: ../analysis/seurat_lchen/seurat_excitatory_layers/sobj_celltype_meta.rds
      md5: 1f90811b50565d840594f7a9bdf6031d
      size: 406242445
  03-seurat-cluster-lme:
    cmd: Rscript seurat_cluster_lme.R
    deps:
    - path: ../../analysis/pci_import/pci_seurat.rds
      md5: ab792d590aea4bd458943607589bfdd6
      size: 39581782428
    - path: ../../analysis/seurat_lchen/seurat_excitatory_layers/sobj_celltype_meta.rds
      md5: 1f90811b50565d840594f7a9bdf6031d
      size: 406242445
    - path: seurat_cluster_lme.R
      md5: 11053b9dd9afbd533490afafaec0a29c
      size: 8723
    outs:
    - path: ../../analysis/seurat_lchen/seurat_cluster_lme/cluster_wk.rds
      md5: c7ff71db5bc84572182716c7d33c098e
      size: 116770587
    - path: ../../analysis/seurat_lchen/seurat_cluster_lme/lme_tables
      md5: 71c1b6565671b93ffe561211ddc27568.dir
      size: 136754381
      nfiles: 32
  04-seurat-celltype-dge-overlap:
    cmd: Rscript seurat_celltype_dge_overlap.R
    deps:
    - path: ../../analysis/seurat_lchen/seurat_cluster_lme/cluster_wk.rds
      md5: c7ff71db5bc84572182716c7d33c098e
      size: 116770587
    - path: seurat_celltype_dge_overlap.R
      md5: c516ec8cba5a421fb710653b066a9f64
      size: 3537
    outs:
    - path: ../../analysis/seurat_lchen/seurat_cluster_lme/celltype_dge_overlaps.pdf
      md5: 01d0452bba8cb84e9bf443984358987b
      size: 322472
  seurat-umap:
    cmd: Rscript seruat_umap.R
    deps:
    - path: ../analysis/pci_import/pci_seurat.rds
      md5: ab792d590aea4bd458943607589bfdd6
      size: 39581782428
    - path: ../analysis/seurat_lchen/seurat_excitatory_layers/sobj_celltype_meta.rds
      md5: 1f90811b50565d840594f7a9bdf6031d
      size: 406242445
    - path: ../resources/Immune_markers_toplot_2021.xlsx
      md5: f24601bb14c9361cadc7292baba673e0
      size: 10255
    - path: seurat_umap.R
      md5: b0aeecad78b2fb09e14feb7d4522a734
      size: 4450
    outs:
    - path: ../analysis/seurat_lchen/seurat_umap/
      md5: 092d0be61258b265bf1146a616e0fdcd.dir
      size: 418823370
      nfiles: 4
